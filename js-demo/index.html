<!DOCTYPE html>

<html>
  <head>
    <title>JS Demo</title>
  </head>

  <body>
    <!-- <script>

      const outer = () => {

        let t = 2;

        setTimeout(() => {
          t = 4;
        }, 2000);

        return () => {
          console.log(t);
        };

      };

      const inner = outer();

      inner();

      setTimeout(() => {
        inner();
      }, 4000);

      // console.dir(inner);

    </script> -->
    <!-- <script>

      setTimeout(() => {

        console.log('a');

      }, 0)

      console.log('b');

    </script> -->
    <script>

      const delay = () => Math.floor(Math.random() * 1000) + 500;

      /*
      setTimeout(() => {
          console.log('a');
          setTimeout(() => {
              console.log('b');
              setTimeout(() => {
                  console.log('c');
              }, delay());
          }, delay());
      }, delay());
      */

      const allDone = () => {
        console.log('all done');
      }

      setTimeout(() => {
        console.log('a');
      }, delay());

      setTimeout(() => {
        console.log('b');
      }, delay());

      setTimeout(() => {
        console.log('c');
      }, delay());

      // Objective: when all three callback finish, run the all done function
      // Rules:
      // 1. You cannot change the delay value or how its calculated
      // 2. You cannot use promises
      // 3. You cannot wrap the allDone in its own high delay setTimeout
      // 4. All three calls to setTimeout must be done in the same task

      // create a folder named 'js-demo'
      // create an index.html file, and copy this code into it
      // run it with 'npx serve .' from a terminal window in the js-demo folder


    </script>

  </body>
</html>